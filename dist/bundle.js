(()=>{"use strict";var e,t,o={784:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=o(445),i=o(482),r=o(798),a=o(155),s={albumname:"",author:"",price:"",stock:"",image:""};class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render(),this.setInputValues()}setInputValues(){const e=i.appState.currentProduct;e&&this.shadowRoot&&(this.shadowRoot.querySelector("#albumName").value=e.albumname,this.shadowRoot.querySelector("#artistName").value=e.author,this.shadowRoot.querySelector("#imageLink").value=e.image,this.shadowRoot.querySelector("#price").value=e.price.toString(),this.shadowRoot.querySelector("#stock").value=e.stock.toString())}changeTitle(e){s.albumname=e.target.value}changeAutor(e){s.author=e.target.value}changePrice(e){s.price=e.target.value}changeStock(e){s.stock=e.target.value}changeImage(e){s.image=e.target.value}submitForm(){var e;(null===(e=i.appState.currentProduct)||void 0===e?void 0:e.id)?((0,n.editSong)(i.appState.currentProduct.id,s),alert("Vinilo actualizado"),(0,i.dispatch)((0,r.navigate)(a.Screens.HOME))):console.error("No hay un ID válido de producto para actualizar")}render(){var e,t,o,n,s,c,d;if(this.shadowRoot){this.shadowRoot.innerHTML='\n                <div>\n                    <input type="text" id="albumName" placeholder="Enter album name">\n                     <input type="text" id="artistName" placeholder="Enter artist name">\n                      <input type="number" id="price" placeholder="Enter price" >\n                      <input type="number" id="stock" placeholder="Enter stock quantity">\n                       <input type="text" id="imageLink" placeholder="Enter image URL">\n                    <button id="submitButton" type="submit">Save Changes</button>\n                    <button id="cancel" type="submit">Cancel</button>\n                </div>\n            ';const u=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#albumName");u.addEventListener("change",this.changeTitle),u.required;const l=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#artistName");l.addEventListener("change",this.changeAutor),l.required;const h=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector("#price");h.addEventListener("change",this.changePrice),h.required;const p=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#stock");p.addEventListener("change",this.changeStock),p.required;const m=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector("#imageLink");m.addEventListener("change",this.changeImage),m.required,(null===(c=this.shadowRoot)||void 0===c?void 0:c.querySelector("#submitButton")).addEventListener("click",this.submitForm);const v=null===(d=this.shadowRoot)||void 0===d?void 0:d.querySelector("#cancel");null==v||v.addEventListener("click",(()=>{alert("Edicion cancelada"),(0,i.dispatch)((0,r.navigate)(a.Screens.MODIFICAR))}))}}}customElements.define("edit-commponent",c),t.default=c},140:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeModi=void 0;const i=o(482),r=o(798),a=o(155),s=o(445);var c;!function(e){e.image="image",e.titlesong="titlesong",e.autor="autor",e.price="price",e.stock="stock",e.idsong="idsong"}(c||(t.AttributeModi=c={}));class d extends HTMLElement{static get observedAttributes(){return Object.values(c)}attributeChangedCallback(e,t,o){switch(e){case c.price:this.price=o?Number(o):void 0;break;case c.stock:this.stock=o?Number(o):void 0;break;default:this[e]=o}}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}selectProductForEdit(e){if(e){const t=i.appState.products.find((t=>t.id===e));t?(i.appState.currentProduct=Object.assign({},t),(0,i.dispatch)((0,r.navigate)(a.Screens.EDIT))):console.error("Producto no encontrado")}}deleteProduct(e){return n(this,void 0,void 0,(function*(){if(e)try{yield(0,s.deleteSong)(e);const t=yield(0,r.getProductsAction)();(0,i.dispatch)(t)}catch(e){console.error("Error al eliminar el producto:",e)}else console.error("ID del producto no proporcionado para eliminar.")}))}render(){if(this.shadowRoot){this.shadowRoot.innerHTML=`\n                <div class="song">\n                    <div class="perfil">\n                        <div id="img">\n                            <img src="${this.image}" >\n                        </div>\n                        <div class="texts">\n                            <p>${this.titlesong}</p>\n                            <p id="autor">${this.autor}</p>\n                        </div>\n                    </div>\n                    <p class="album">${this.price}</p>\n                    <p class="duracion">${this.stock}</p>\n                    <button id="edit">Editar</button>\n                    <button id="delete">Delete</button>\n                </div>\n            `;const e=this.shadowRoot.querySelector("#edit");null==e||e.addEventListener("click",(()=>this.selectProductForEdit(this.idsong)));const t=this.shadowRoot.querySelector("#delete");null==t||t.addEventListener("click",(()=>{this.deleteProduct(this.idsong),alert("Vinilo borrado")}))}}}customElements.define("modi-commponent",d),t.default=d},842:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=o(482),i=o(155),r=o(798);class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){if(this.shadowRoot){const e=this.ownerDocument.createElement("h1");e.innerText="Vinyl Store",this.shadowRoot.appendChild(e),null==e||e.addEventListener("click",(()=>{(0,n.dispatch)((0,r.navigate)(i.Screens.MODIFICAR))}));const t=this.ownerDocument.createElement("p");t.innerText="Home",this.shadowRoot.appendChild(t),null==t||t.addEventListener("click",(()=>{}));const o=this.ownerDocument.createElement("p");o.innerText="Add New Product",this.shadowRoot.appendChild(o),null==o||o.addEventListener("click",(()=>{}));const a=this.ownerDocument.createElement("p");a.innerText="Modify Products",this.shadowRoot.appendChild(a),null==a||a.addEventListener("click",(()=>{}))}}}customElements.define("nav-commponent",a),t.default=a},730:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0,function(e){e.idsong="idsong",e.image="image",e.titlesong="titlesong",e.autor="autor",e.price="price",e.stock="stock"}(o||(t.Attribute=o={}));class n extends HTMLElement{static get observedAttributes(){return Object.values(o)}attributeChangedCallback(e,t,n){switch(e){case o.idsong:this.idsong=n?Number(n):void 0;break;case o.price:this.price=n?Number(n):void 0;break;case o.stock:this.stock=n?Number(n):void 0;break;default:this[e]=n}}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`\n                <div class="song">\n                    <div class="perfil">\n                        <div id="img">\n                            <img src="${this.image}" >\n                        </div>\n                        <div class="texts">\n                            <p>${this.titlesong}</p>\n                            <p id="autor">${this.autor}</p>\n                        </div>\n                    </div>\n                    <p class="album">${this.price}</p>\n                    <p class="duracion">${this.stock}</p>\n                </div>\n            `)}}customElements.define("song-commponent",n),t.default=n},162:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),o(842),o(784);class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return n(this,void 0,void 0,(function*(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n        <nav-commponent></nav-commponent>\n        <add-commponent></add-commponent>\n        ")}))}}customElements.define("app-add",i)},969:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),o(842),o(784);class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){return n(this,void 0,void 0,(function*(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n                <nav-commponent></nav-commponent>\n                <edit-commponent></edit-commponent>\n                ")}))}}customElements.define("app-edit",i)},447:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),o(842);const i=o(730),r=o(798),a=o(482),s=o(482);class c extends HTMLElement{constructor(){super(),this.songsList=[],this.attachShadow({mode:"open"})}connectedCallback(){return n(this,void 0,void 0,(function*(){if(0===s.appState.products.length){const e=yield(0,r.getProductsAction)();(0,a.dispatch)(e)}this.render()}))}render(){return n(this,void 0,void 0,(function*(){var e,t;if(this.shadowRoot){this.shadowRoot.innerHTML='\n           \n            <nav-commponent></nav-commponent>\n             <div class="songs"></div>\n            ',null===(e=s.appState.products)||void 0===e||e.forEach((e=>{const t=this.ownerDocument.createElement("song-commponent");t.setAttribute(i.Attribute.titlesong,e.albumname),t.setAttribute(i.Attribute.autor,e.author),t.setAttribute(i.Attribute.image,e.image),t.setAttribute(i.Attribute.stock,e.stock),t.setAttribute(i.Attribute.price,e.price),this.songsList.push(t)}));const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".songs");this.songsList.forEach((e=>{null==o||o.appendChild(e)}))}}))}}customElements.define("app-home",c)},770:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),o(842);const i=o(140),r=o(798),a=o(482),s=o(482);class c extends HTMLElement{constructor(){super(),this.songsListModi=[],this.attachShadow({mode:"open"})}connectedCallback(){return n(this,void 0,void 0,(function*(){if(0===s.appState.products.length){const e=yield(0,r.getProductsAction)();(0,a.dispatch)(e)}this.render()}))}render(){return n(this,void 0,void 0,(function*(){var e,t;if(this.shadowRoot){this.shadowRoot.innerHTML='\n                <nav-commponent></nav-commponent>\n                 <div class="songs"></div>\n                ',null===(e=s.appState.products)||void 0===e||e.forEach((e=>{const t=this.ownerDocument.createElement("modi-commponent");t.setAttribute(i.AttributeModi.titlesong,e.albumname),t.setAttribute(i.AttributeModi.idsong,e.id),t.setAttribute(i.AttributeModi.autor,e.author),t.setAttribute(i.AttributeModi.image,e.image),t.setAttribute(i.AttributeModi.stock,e.stock),t.setAttribute(i.AttributeModi.price,e.price),this.songsListModi.push(t)}));const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".songs");this.songsListModi.forEach((e=>{null==o||o.appendChild(e)}))}}))}}customElements.define("app-modi",c)},798:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getProductsAction=t.navigate=void 0;const i=o(155),r=o(445);t.navigate=e=>({action:i.Actions.NAVIGATE,payload:e}),t.getProductsAction=()=>n(void 0,void 0,void 0,(function*(){const e=yield(0,r.getSongs)();return{action:i.Actions.GETPRODUCTS,payload:e}}))},482:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addObserver=t.dispatch=t.appState=void 0;const n=o(950),i={screen:o(155).Screens.HOME,products:[],currentProduct:null};t.appState=i;let r=[];t.dispatch=e=>{const o=JSON.parse(JSON.stringify(t.appState)),i=(0,n.reducer)(e,o);t.appState=i,r.forEach((e=>e.render()))},t.addObserver=e=>{r=[...r,e]}},950:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const n=o(155);t.reducer=(e,t)=>{const{action:o,payload:i}=e;switch(o){case n.Actions.NAVIGATE:return Object.assign(Object.assign({},t),{screen:i});case n.Actions.GETPRODUCTS:return Object.assign(Object.assign({},t),{products:i});default:return t}}},155:(e,t)=>{var o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=t.Screens=void 0,function(e){e.ADD="ADD",e.EDIT="EDIT",e.HOME="HOME",e.MODIFICAR="MODIFICAR"}(o||(t.Screens=o={})),function(e){e.NAVIGATE="NAVIGATE",e.GETPRODUCTS="GETPRODUCTS"}(n||(t.Actions=n={}))},445:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSong=t.editSong=t.getSongs=t.addSong=t.getFirebaseInstance=void 0;const i=o(595);let r,a,s;t.getFirebaseInstance=()=>n(void 0,void 0,void 0,(function*(){if(!r){const{getFirestore:e}=yield Promise.all([o.e(990),o.e(594)]).then(o.bind(o,594)),{initializeApp:t}=yield Promise.all([o.e(990),o.e(223)]).then(o.bind(o,223)),{getAuth:n}=yield Promise.all([o.e(990),o.e(150)]).then(o.bind(o,150)),{getStorage:c}=yield Promise.all([o.e(990),o.e(539)]).then(o.bind(o,539)),d=t(i.firebaseConfig);r=e(d),a=n(d),s=c()}return{db:r,auth:a,storage:s}})),t.addSong=e=>n(void 0,void 0,void 0,(function*(){try{const{db:n}=yield(0,t.getFirebaseInstance)(),{collection:i,addDoc:r}=yield Promise.all([o.e(990),o.e(594)]).then(o.bind(o,594)),a=i(n,"vinyls"),s={albumname:e.albumname,author:e.author,price:e.price,stock:e.stock,image:e.image,dateadded:(new Date).toISOString()},c=yield r(a,s);return console.log("Se añadió con éxito el post con ID:",c.id),c.id}catch(e){throw console.error("Error al añadir el documento:",e),e}})),t.getSongs=()=>n(void 0,void 0,void 0,(function*(){try{const{db:e}=yield(0,t.getFirebaseInstance)(),{collection:n,getDocs:i,query:r,orderBy:a}=yield Promise.all([o.e(990),o.e(594)]).then(o.bind(o,594)),s=r(n(e,"vinyls"),a("dateadded","desc")),c=yield i(s),d=[];return c.forEach((e=>{const t=e.data();t.id=e.id,d.push(t)})),d}catch(e){return console.error("Error obteniendo los documentos:",e),[]}})),t.editSong=(e,i)=>n(void 0,void 0,void 0,(function*(){try{const{db:n}=yield(0,t.getFirebaseInstance)(),{doc:r,updateDoc:a}=yield Promise.all([o.e(990),o.e(594)]).then(o.bind(o,594)),s=r(n,"vinyls",e);return yield a(s,i),console.log(`El documento con ID ${e} fue actualizado con éxito.`),!0}catch(e){throw console.error("Error al actualizar el documento:",e),e}})),t.deleteSong=e=>n(void 0,void 0,void 0,(function*(){try{const{db:n}=yield(0,t.getFirebaseInstance)(),{doc:i,deleteDoc:r}=yield Promise.all([o.e(990),o.e(594)]).then(o.bind(o,594)),a=i(n,"vinyls",e);yield r(a),console.log(`El producto con ID ${e} ha sido eliminado correctamente.`)}catch(e){throw console.error("Error al eliminar el producto de Firebase:",e),e}}))},595:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseConfig=void 0,t.firebaseConfig={apiKey:"AIzaSyBFaULENz5iBcmIAL9kr5VJtnJ9e4KcKPs",authDomain:"preparcialalgo.firebaseapp.com",projectId:"preparcialalgo",storageBucket:"preparcialalgo.firebasestorage.app",messagingSenderId:"453569508964",appId:"1:453569508964:web:0e05c70a93d034573e1171"}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e].call(r.exports,r,r.exports,i),r.exports}i.m=o,i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,o)=>(i.f[o](e,t),t)),[])),i.u=e=>e+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="lab3algoritmos:",i.l=(o,n,r,a)=>{if(e[o])e[o].push(n);else{var s,c;if(void 0!==r)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var l=d[u];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")==t+r){s=l;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",t+r),s.src=o),e[o]=[n];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,o)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise(((o,i)=>n=e[t]=[o,i]));o.push(n[2]=r);var a=i.p+i.u(t),s=new Error;i.l(a,(o=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,n[1](s)}}),"chunk-"+t,t)}};var t=(t,o)=>{var n,r,[a,s,c]=o,d=0;if(a.some((t=>0!==e[t]))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);c&&c(i)}for(t&&t(o);d<a.length;d++)r=a[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0},o=self.webpackChunklab3algoritmos=self.webpackChunklab3algoritmos||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),(()=>{i(162),i(969),i(447),i(770);const e=i(482),t=i(155);i(842);class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,e.addObserver)(this)}connectedCallback(){this.render()}render(){var o,n,i,r;if(this.shadowRoot)switch(this.shadowRoot.innerHTML="",e.appState.screen){case t.Screens.ADD:const e=this.ownerDocument.createElement("app-add");null===(o=this.shadowRoot)||void 0===o||o.appendChild(e);break;case t.Screens.EDIT:const a=this.ownerDocument.createElement("app-edit");null===(n=this.shadowRoot)||void 0===n||n.appendChild(a);break;case t.Screens.HOME:const s=this.ownerDocument.createElement("app-home");null===(i=this.shadowRoot)||void 0===i||i.appendChild(s);break;case t.Screens.MODIFICAR:const c=this.ownerDocument.createElement("app-modi");null===(r=this.shadowRoot)||void 0===r||r.appendChild(c)}}}customElements.define("app-container",o)})()})();